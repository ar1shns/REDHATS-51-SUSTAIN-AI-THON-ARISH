<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temporary QR Code Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a1a, #2d3436);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            color: #2d3436;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }

        .header p {
            color: #636e72;
            font-size: 0.9rem;
        }

        .qr-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .qr-code {
            border: 4px solid #f1f1f1;
            border-radius: 10px;
            padding: 10px;
            display: none;
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2d3436;
            display: none;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        button {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        button:disabled {
            background-color: #b2bec3 !important;
            cursor: not-allowed;
        }

        #generateBtn {
            background-color: #0984e3;
            color: white;
        }

        #generateBtn:hover:not(:disabled) {
            background-color: #0870c0;
        }

        #stopBtn {
            background-color: #d63031;
            color: white;
        }

        #stopBtn:hover:not(:disabled) {
            background-color: #c02829;
        }

        .unique-id {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: #636e72;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Temporary QR Code</h1>
            <p>Generate a QR code that expires in 5 minutes</p>
        </div>
        
        <div class="qr-container">
            <img id="qrCode" class="qr-code" alt="QR Code">
            <div id="timer" class="timer"></div>
        </div>

        <div class="button-container">
            <button id="generateBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                </svg>
                Generate New QR
            </button>
            <button id="stopBtn" disabled>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18.36 6.64a9 9 0 1 1-12.73 0M12 2v10"/>
                </svg>
                Deactivate QR
            </button>
        </div>

        <div id="uniqueId" class="unique-id"></div>
    </div>

    <script>
        const qrCode = document.getElementById('qrCode');
        const timer = document.getElementById('timer');
        const generateBtn = document.getElementById('generateBtn');
        const stopBtn = document.getElementById('stopBtn');
        const uniqueIdDiv = document.getElementById('uniqueId');

        let timeLeft = 0;
        let timerInterval;

        function generateUniqueId() {
            return Math.random().toString(36).substring(2) + Date.now().toString(36);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function stopQRCode() {
            clearInterval(timerInterval);
            qrCode.style.display = 'none';
            timer.style.display = 'none';
            uniqueIdDiv.style.display = 'none';
            generateBtn.disabled = false;
            stopBtn.disabled = true;
            timeLeft = 0;
        }

        function startQRCode() {
            const uniqueId = generateUniqueId();
            qrCode.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${uniqueId}`;
            qrCode.style.display = 'block';
            timer.style.display = 'block';
            uniqueIdDiv.style.display = 'block';
            uniqueIdDiv.textContent = `Unique ID: ${uniqueId}`;
            
            generateBtn.disabled = true;
            stopBtn.disabled = false;
            
            timeLeft = 300; // 5 minutes in seconds
            timer.textContent = formatTime(timeLeft);

            timerInterval = setInterval(() => {
                timeLeft--;
                timer.textContent = formatTime(timeLeft);
                
                if (timeLeft <= 0) {
                    stopQRCode();
                }
            }, 1000);
        }

        generateBtn.addEventListener('click', startQRCode);
        stopBtn.addEventListener('click', stopQRCode);
    </script>
</body>
</html>